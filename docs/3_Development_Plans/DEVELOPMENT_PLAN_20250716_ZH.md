# 下一阶段开发计划 (2025-07-16)

**制定人**: Cline (系统架构师)
**状态**: 待执行

## 1. 总体目标

完成剩余的功能，并对项目进行全面的润色和加固，为最终的生产部署做准备。

## 2. 优先级定义

- **P2 - 中优先级 (Medium):** 重要的功能完善、架构重构或开发者体验改进。能显著提升产品质量和可维护性。
- **P3 - 低优先级 (Low):** 功能增强、UI/UX 优化或次要的功能实现。属于锦上添花，可在核心功能稳定后进行。

---

## 3. 开发任务清单与优先级

| 优先级 | 任务名称                             | 任务描述                                                                                                                                                                                                                                                                                                            |
| :----: | :----------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **P2** | **实现对话式图像生成的图床上传功能** | **问题**: 当前图像生成后，可能返回的是需要进一步处理的格式，而不是公开可访问的 URL。<br>**方案**: 1. 调研并选择一个图床服务（如 Cloudflare R2, Vercel Blob, or a free service like sm.ms）。 2. 在 `src/lib/imagen-client.ts`（或相关服务）中，实现图片上传逻辑。 3. 将图床返回的公开 URL 包装在最终的 API 响应中。 |
| **P3** | **代码和依赖项审查**                 | **问题**: 项目快速迭代，可能引入了未使用的代码或过时的依赖。<br>**方案**: 1. 使用 `depcheck` 或类似工具检查未使用的依赖项。 2. 手动审查 `src/lib` 和 `src/app` 目录，移除不再需要的组件、函数或页面。 3. 运行 `pnpm audit` 检查已知的安全漏洞并酌情升级。                                                           |
| **P3** | **撰写或完善项目文档**               | **问题**: `README.md` 和其他文档可能已过时。<br>**方案**: 1. 更新 `README.md`，详细说明安装、配置和部署步骤。 2. 为环境变量 (`.env.example`) 添加详细的注释。 3. （可选）在 `docs` 目录下为核心模块（如 `KeyManager`）撰写简要的设计文档。                                                                          |
